<div class="box" style="height: 600px;">
    <div class="columns" style="margin-top:-25px">
        <div class="column is-narrow">
            <form #equiposForm="ngForm">
            <div class="columns">
                <div class="column is-narrow" style="width:115px"><label class="label">Marca:</label></div>
                <div class="column is-narrow" style="width: 180px;">
                    <input type="text" class="input is-small" name="marca" #marca="ngModel" [(ngModel)]="equipo.marca" (ngModelChange)="equipo.marca = $event.toUpperCase()" required>                    
                </div>                    
                <div class="column is-narrow" style="width:110px"><label class="label">Modelo:</label></div>
                <div class="column is-narrow" style="width: 180px;">
                    <input type="text" class="input is-small" name="modelo" #modelo="ngModel" [(ngModel)]="equipo.modelo" (ngModelChange)="equipo.modelo = $event.toUpperCase()" required>
                </div>
            </div>
            <div class="columns" style="margin-top:-25px">
                <div class="column is-narrow" style="width:115px"><label class="label">Serie:</label></div>
                <div class="column is-narrow" style="width:180px;">
                    <input type="text" class="input is-small" name="serie" #serie="ngModel" [(ngModel)]="equipo.serie" (ngModelChange)="equipo.serie = $event.toUpperCase()" required>
                </div>                            
                <div class="column is-narrow" style="width:110px"><label class="label">Costo:</label></div>
                <div class="column is-narrow" style="width: 180px;"><input type="number" class="input is-small" name="costo" #costo="ngModel" [(ngModel)]="equipo.costo" required></div>
            </div>
            <div class="columns" style="margin-top:-25px">
                <div class="column is-narrow" style="width:115px"><label class="label">Técnico:</label></div>
                <div class="column is-narrow" style="width:180px;">
                    <div class="select is-small">
                    <select name="tecnico" [(ngModel)]="equipo.tecnico" (change)="changetecnico($event)">
                        <option [ngValue]="null" disabled selected="selected">Seleccione Técnico</option>
                        <option *ngFor="let tecnico of tecnicos" [ngValue]="tecnico._id">{{tecnico.nombre}} {{tecnico.apellido}}</option>
                    </select>
                    </div>
                </div>
            </div>  
            <div class="field" style="margin-top:-15px">
                <label class="label">Comentarios:</label>
                <div class="control">
                    <textarea name="comentarios" [(ngModel)]="equipo.comentarios" class="textarea is-primary" rows="1" required></textarea>
                </div>
            </div>       
            <div class="field" style="margin-top:-15px">
                <label class="label">Diagnóstico Inicial:</label>
                <div class="control">
                    <textarea name="diagnostico" [(ngModel)]="equipo.diagnostico" class="textarea is-primary" rows="1" required></textarea>
                </div>
            </div>
            <nav class="level">
                <div class="level-left">
                    <div class="level-item">
                        <button type="button" class="button is-success" (click)="addEquipo()" [disabled]="equiposForm.invalid">{{btnAccion}}</button>
                    </div>
                </div>
                <div class="level-right">
                    <div class="level-item">
                        <a (click)="eliminarEquipo()"><span class="icon has-text-danger"><i class="fas fa-trash-alt"></i></span></a>
                    </div>
                </div>
            </nav>
            </form>
        </div>
        <div class="column" style="margin-top: -10px;">
            <angular-file-uploader [config]="afuConfig" 
            (ApiResponse)="imageUpload($event)"></angular-file-uploader>
            <div class="columns is-gapless is-multiline">
                <div class="column is-narrow" style="width:55px ;" *ngFor="let img of equipo.imagenes; let i=index;">
                    <img src="{{url+'get-image/'+img.nombre}}" title="{{img.nombreoriginal}}" class="equipos" (click)="clickImage(img.nombre,i)" />
                </div>
            </div>
        </div>        
    </div>    
    
    <table class="table is-bordered" style="width:100%;margin-top:-15px">        
        <thead>
        <tr>
            <td style="width: 85px;text-align: center;">Marca</td>
            <td style="width: 96px;text-align: center;">Modelo</td>
            <td style="width: 85px;text-align: center;">Serie</td>
            <td style="width: 71px;text-align: center;">Costo</td>
            <td style="width: 117px;text-align: center;">Técnico</td>
            <td style="width: 147px;text-align: center;">Comentarios</td>
            <td style="width: 152px;text-align: center;">Diagnóstico</td>
        </tr>
        </thead>
    </table>
    <div style="width:100%; height:150px; overflow:auto; margin-top:-20px">
        <table class="table is-hoverable" style="width:100%">            
            <tr *ngFor="let equipo of equipos; let i = index" (dblclick)="editEquipo(i)" (click)="selectRow(i)" [class.is-selected]="i == HighlightRow">
                <td style="width: 108px;text-align: center;font-size:12px">{{equipo.marca}}</td>
                <td style="width: 124px;text-align: center;font-size:12px">{{equipo.modelo}}</td>
                <td style="width: 103px;text-align: center;font-size:12px">{{equipo.serie}}</td>
                <td style="width: 87px;text-align: center;font-size:12px">{{equipo.costo | currency}}</td>
                <td style="width: 150px;text-align: center;font-size:12px">{{equipo.nombretecnico}}</td>
                <td style="width: 100px;text-align: center;"><textarea rows="1" disabled style="font-size:12px;">{{equipo.comentarios}}</textarea></td>
                <td style="width: 160px;text-align: center;"><textarea rows="1" disabled style="font-size:12px;">{{equipo.diagnostico}}</textarea></td>
            </tr>
        </table>
    </div>        
</div>

<div class="modal is-active" *ngIf="imageActive">
    <div class="modal-background"></div>
    <div class="modal-content">        
        <figure class="image is-fullwidth">
            <img src="{{imgPath}}" alt="">
        </figure>
    </div>
    <button class="modal-close is-large" (click)="closeModal()" aria-label="close"></button>
    <div class="modal-card">
        <footer class="modal-card-foot">
            <button class="button is-success" (click)="eliminarImg(imgname,imgIndex)">Eliminar</button>
            <button class="button" (click)="closeModal()">Cerrar</button>
        </footer>
    </div>
</div>

